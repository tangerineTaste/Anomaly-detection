version: '3.8' # Docker Compose 버전

services:
  # 1. 백엔드 서비스 정의
  backend:
    build: ./server  # ./server 폴더의 Dockerfile을 사용
    image: simjoso/my-project-server:latest
    ports:
      - "5000:5000"  # PC 5000번 포트와 컨테이너 5000번 포트를 연결


  # 2. 프론트엔드 서비스 정의
  frontend:
    build: ./client # ./client 폴더의 Dockerfile을 사용
    image: simjoso/my-project-client:latest
    ports:
      - "3000:80"    # PC 3000번 포트와 컨테이너 80번 포트(Nginx)를 연결
    depends_on:
      - backend      # 백엔드가 먼저 실행되도록 설정 (필수는 아님)